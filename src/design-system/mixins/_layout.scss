@use "../tokens" as *;

@mixin respond-to($breakpoint) {
	$value: null;
	
	// if the parameter is a string, check if it is a valid breakpoint
	@if type-of($breakpoint) == string {
		@if map-has-key($breakpoints, $breakpoint) {
			$value: map-get($breakpoints, $breakpoint);
		} @else {
			@error "Invalid breakpoint '#{$breakpoint}'. Valid breakpoints are: #{map-keys($breakpoints)}";
		}
	}
	// if the parameter is a number, validate it
	@else if type-of($breakpoint) == number {
		@if unitless($breakpoint) {
			@error "Breakpoint value '#{$breakpoint}' must have a unit (px, em, rem, etc.)";
		} @else if $breakpoint <= 0 {
			@error "Breakpoint value '#{$breakpoint}' must be greater than 0";
		} @else {
			$value: $breakpoint;
		}
	}
	@else {
		@error "Breakpoint '#{$breakpoint}' must be a string (breakpoint name) or a number with unit";
	}
	
	@media (max-width: $value) {
		@content;
	}
}
